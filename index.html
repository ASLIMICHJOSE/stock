<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stock Pluse Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</head>
<body class="bg-gray-900 text-white font-sans">

<!-- Header -->
<header class="bg-gray-800 shadow-md p-4 flex justify-between items-center">
  <div class="flex items-center space-x-3">
    <img src="https://img.icons8.com/fluency/48/stocks.png" alt="Logo" class="w-10 h-10">
    <h1 class="text-2xl font-bold">Stock Pluse</h1>
  </div>
  <nav class="space-x-6">
    <a href="#" class="hover:text-green-400">Dashboard</a>
    <a href="#" class="hover:text-green-400">Markets</a>
    <a href="#" class="hover:text-green-400">News</a>
    <a href="#" class="hover:text-green-400">Analytics</a>
  </nav>
</header>

<!-- Market Overview -->
<section class="p-6">
  <h2 class="text-2xl font-semibold mb-6">ðŸ“Š Market Overview</h2>
  <div id="market-overview" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
    <!-- Cards will be dynamically generated by JS -->
  </div>
</section>


<!-- Live Stock Table -->
<section class="p-6 bg-gray-800 rounded-lg shadow-md mx-4">
  <h2 class="text-xl font-semibold mb-4">ðŸ”¥ Live Stock Prices</h2>
  <table class="w-full text-left table-fixed border-collapse">
    <thead>
      <tr class="border-b border-gray-700">
        <th class="py-2 w-1/6">Symbol</th>
        <th class="py-2 w-1/6">Price</th>
        <th class="py-2 w-1/6">Change %</th>
        <th class="py-2 w-1/6">Trend</th>
        <th class="py-2 w-1/6">Watchlist</th>
      </tr>
    </thead>
    <tbody id="stock-table"></tbody>
  </table>
</section>

<!-- Multi-Stock Chart -->
<section class="p-6">
  <h2 class="text-xl font-semibold mb-4">ðŸ“ˆ Watchlist Chart</h2>
  <div class="bg-gray-800 p-4 rounded-lg shadow-md">
    <canvas id="stockChart" height="150"></canvas>
  </div>
</section>

<!-- News Section -->
<section class="p-6">
  <h2 class="text-xl font-semibold mb-4">ðŸ“° Latest News</h2>
  <div id="news-section" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
</section>

<!-- Footer -->
<footer class="bg-gray-800 text-center p-4 mt-6">
  <p class="text-gray-400">Â© 2025 Stock Pluse. All rights reserved.</p>
</footer>
<script>
const API_KEY = "d36mn8hr01qtvbtibm9gd36mn8hr01qtvbtibma0";

// Indices with sample stocks (replace/add as needed)
const indices = [
  {name:"Sensex", symbol:"BSE:SENSEX", stocks:["RELIANCE.BSE","TCS.BSE","INFY.BSE"]},
  {name:"Nifty 50", symbol:"NSE:NIFTY 50", stocks:["RELIANCE.NS","TCS.NS","INFY.NS"]},
  {name:"Dow Jones", symbol:"^DJI", stocks:["AAPL","MSFT","JNJ"]},
  {name:"NASDAQ", symbol:"^IXIC", stocks:["GOOGL","AMZN","TSLA"]}
];

const sparklines = {};
const container = document.getElementById("market-overview");

// Create cards dynamically
indices.forEach(index=>{
  const card = document.createElement("div");
  card.className="market-card bg-gray-800 p-4 rounded-lg shadow-md flex flex-col justify-between";
  
  // Add index header
  card.innerHTML=`
    <h3 class="text-sm text-gray-400 mb-1">${index.name}</h3>
    <p class="text-2xl font-bold" id="${index.symbol}-price">--</p>
    <p class="text-xs mb-1" id="${index.symbol}-change">--</p>
    <p class="text-xs text-gray-400 mb-1" id="${index.symbol}-highlow">--</p>
    <canvas id="${index.symbol}-spark" height="40" class="mb-2"></canvas>
    <div id="${index.symbol}-stocks" class="text-xs space-y-1"></div>
  `;
  
  container.appendChild(card);

  // Sparkline for index
  const ctx = document.getElementById(`${index.symbol}-spark`).getContext("2d");
  sparklines[index.symbol] = new Chart(ctx,{
    type:"line",
    data:{labels:[], datasets:[{data:[], borderColor:"#3b82f6", backgroundColor:"#3b82f633", tension:0.3}]},
    options:{responsive:true, plugins:{legend:{display:false}}, scales:{x:{display:false},y:{display:false}}}
  });
});

// Fetch Finnhub quote
async function fetchQuote(symbol){
  try{
    const res = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${API_KEY}`);
    return await res.json();
  }catch(err){ console.error(err); return null; }
}

// Update indices and stocks
async function updateIndices(){
  for(const index of indices){
    const data = await fetchQuote(index.symbol);
    if(!data) continue;

    const priceEl = document.getElementById(`${index.symbol}-price`);
    const changeEl = document.getElementById(`${index.symbol}-change`);
    const highlowEl = document.getElementById(`${index.symbol}-highlow`);
    const stockContainer = document.getElementById(`${index.symbol}-stocks`);

    const price = data.c.toFixed(2);
    const change = data.dp!==null?data.dp.toFixed(2):0;
    const high = data.h!==null?data.h.toFixed(2):"--";
    const low = data.l!==null?data.l.toFixed(2):"--";

    priceEl.innerText = price;
    changeEl.innerHTML = change>=0
      ? `<span class="text-green-400">â–² ${change}%</span>`
      : `<span class="text-red-400">â–¼ ${change}%</span>`;
    highlowEl.innerText = `High: ${high} | Low: ${low}`;

    // Update sparkline
    const spark = sparklines[index.symbol];
    if(spark.data.labels.length>20){ spark.data.labels.shift(); spark.data.datasets[0].data.shift();}
    spark.data.labels.push(new Date().toLocaleTimeString());
    spark.data.datasets[0].data.push(data.c);
    spark.update();

    // Update individual stocks
    stockContainer.innerHTML = "";
    for(const stock of index.stocks){
      const sData = await fetchQuote(stock);
      if(!sData) continue;
      const sPrice = sData.c.toFixed(2);
      const sChange = sData.dp!==null?sData.dp.toFixed(2):0;
      const stockEl = document.createElement("div");
      stockEl.innerHTML = `${stock} : <span class="${sChange>=0?"text-green-400":"text-red-400"}">${sPrice} (${sChange>=0?"+":""}${sChange}%)</span>`;
      stockContainer.appendChild(stockEl);
    }
  }
}

// Update every second
setInterval(updateIndices,1000);
updateIndices();

</script>>
</body>
</html>
